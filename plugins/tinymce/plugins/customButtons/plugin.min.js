tinymce.PluginManager.add('customButtons', function(editor, url) {
  if( typeof aQuick.imageLocations !== 'undefined' ){
    editor.addButton('gallery', {
      title: 'Insert gallery',
      onclick: function() {
        editor.windowManager.open({
          title: aQuick.sGalleryType, 
          body: [{type: 'listbox', 'values': aQuick.imageLocations, name: 'title', minWidth:270}],
          onsubmit: function(e) {
              editor.insertContent('<div class="mrk">'+e.data.title+'</div>');
          }
        });
      }
    });
  }
  editor.addButton('break', {
    title: 'Page break',
    onclick: function() {
      editor.insertContent('<div class="mrk">[BREAK]</div>');
    },
  });
  if( typeof aQuick.widgetsIds !== 'undefined' ){
    editor.addButton('quickwidget', {
      title: 'Insert widget',
      onclick: function() {
        editor.windowManager.open({
          title: aQuick.sWidgetType, 
          body: [{type: 'listbox', 'values': aQuick.widgetsIds, name: 'title', minWidth:270}],
          onsubmit: function(e) {
            editor.insertContent('<div class="mrk">'+e.data.title+'</div>');
          }
        });
      }
    });
  }
});